@page "/"
@attribute [Authorize]

<PageTitle>FitLife - Hjem</PageTitle>

<div class="homescreen-container">
    <Greetings Streak="@_userStreak" />
    <CheckIn Streak="@_userStreak" />
    <Recommended TodaysPlan="@_todaysPlan" NextSession="@_nextSession" />
    <LiveActivity Occupancy="@_gymOccupancy" />
    <QuickActions Actions="@_quickActions" />
</div>

@code {
    // User-specific data - will come from StatsService API
    private UserStreak _userStreak = new()
    {
        CurrentStreak = 0,
        StreakGoal = 7,
        LastCheckIn = DateTime.MinValue,
        CheckedInToday = false
    };

    // Will come from ExerciseService/TrainingService API
    private TrainingPlan _todaysPlan = new()
    {
        Name = "Ingen plan",
        ExerciseCount = 0,
        DurationMinutes = 0
    };

    // Will come from BookingService API
    private TeamSession _nextSession = new()
    {
        Name = "Ingen booking",
        Time = "-",
        AvailableSpots = 0
    };

    // Will come from real-time occupancy API
    private GymOccupancy _gymOccupancy = new()
    {
        CurrentOccupancy = 0,
        MaxCapacity = 150
    };

    // Navigation quick actions - these are static
    private List<QuickAction> _quickActions = new()
    {
        new QuickAction { IconName = "ClipboardCheck", Label = "Start Træning", Href = "/trainingpage" },
        new QuickAction { IconName = "CalendarCheck", Label = "Book Hold", Href = "/bookingpage" },
        new QuickAction { IconName = "GraphUpArrow", Label = "Min Progress", Href = "/progresspage" },
        new QuickAction { IconName = "ListCheck", Label = "Øvelser", Href = "/exercisespage" }
    };

    protected override async Task OnInitializedAsync()
    {
        // TODO: Load data from respective APIs
        // _userStreak = await StatsService.GetUserStreakAsync();
        // _todaysPlan = await TrainingService.GetTodaysPlanAsync();
        // _nextSession = await BookingService.GetNextSessionAsync();
        // _gymOccupancy = await OccupancyService.GetCurrentOccupancyAsync();
        await Task.CompletedTask;
    }
}