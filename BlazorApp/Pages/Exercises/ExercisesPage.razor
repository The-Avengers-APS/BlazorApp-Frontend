@page "/exercisespage"

<div class="container py-4">
    <h3>Øvelser</h3>
    <h4 class="text-muted mb-4">Udforsk øvelses-biblioteket</h4>

    <div class="mb-4">
        <div class="input-group">
            <span class="input-group-text">
                <Icon Name="IconName.Search" />
            </span>
            <input type="text"
                   class="form-control"
                   placeholder="Søg efter øvelser..."
                   @bind="searchQuery"
                   @bind:event="oninput" />
        </div>
    </div>

    <div class="exercises-cards">
        @foreach (var exercise in FilteredExercises)
        {
            <ExercisesCard
                Title="@exercise.Title"
                MuscleGroup="@exercise.MuscleGroup"
                Equipment="@exercise.Equipment"
                Difficulty="@exercise.Difficulty" />
        }
    </div>

    @if (!FilteredExercises.Any())
    {
        <div class="text-center text-muted py-5">
            <Icon Name="IconName.Search" Size="IconSize.x6" />
            <p class="mt-3">Ingen øvelser fundet</p>
        </div>
    }
</div>

@code {
    private string searchQuery = string.Empty;

    private class Exercise
    {
        public string Title { get; set; } = string.Empty;
        public string MuscleGroup { get; set; } = string.Empty;
        public string Equipment { get; set; } = string.Empty;
        public string Difficulty { get; set; } = string.Empty;
    }

    private List<Exercise> exercises = new()
    {
        new Exercise { Title = "Bænkpres", MuscleGroup = "Bryst", Equipment = "Vægtstang", Difficulty = "Mellem" },
        new Exercise { Title = "Squat", MuscleGroup = "Ben", Equipment = "Vægtstang", Difficulty = "Mellem" },
        new Exercise { Title = "Dødløft", MuscleGroup = "Ryg", Equipment = "Vægtstang", Difficulty = "Avanceret" },
        new Exercise { Title = "Biceps Curl", MuscleGroup = "Arme", Equipment = "Håndvægte", Difficulty = "Begynder" },
        new Exercise { Title = "Skulder Pres", MuscleGroup = "Skuldre", Equipment = "Håndvægte", Difficulty = "Begynder" },
        new Exercise { Title = "Pull-ups", MuscleGroup = "Ryg", Equipment = "Kropsvægt", Difficulty = "Avanceret" }
    };

    private IEnumerable<Exercise> FilteredExercises =>
        string.IsNullOrWhiteSpace(searchQuery)
            ? exercises
            : exercises.Where(e =>
                e.Title.Contains(searchQuery, StringComparison.OrdinalIgnoreCase) ||
                e.MuscleGroup.Contains(searchQuery, StringComparison.OrdinalIgnoreCase) ||
                e.Equipment.Contains(searchQuery, StringComparison.OrdinalIgnoreCase) ||
                e.Difficulty.Contains(searchQuery, StringComparison.OrdinalIgnoreCase));
}
